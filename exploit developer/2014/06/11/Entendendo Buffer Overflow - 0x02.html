<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Entendendo Buffer Overflow - 0x02</title>
	
	<meta name="author" content="mh4x0f">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/mh4x0f">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/mh4x0f">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:mh4root@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="http://avatars.githubusercontent.com/u/6795613" class="img-circle" />
				
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="http://avatars.githubusercontent.com/u/6795613" class="img-circle" style="width:112px;height:112px;" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	One 0x41414141 worth a thousand words
</div>

<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/mh4x0f">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/mh4x0f">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:mh4root@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<form class="col-lg-12" action="http://feedburner.google.com/fb/a/mailverify?uri=chmodsecurity" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=chmodsecurity', 'popupwindow', 'scrollbars=yes,width=250,height=220');return true" >
			<div class="input-group" style="width:240px;text-align:center;margin:0 auto;">
			<input type="hidden" value="chmodsecurity" name="uri" >
		  <input type="hidden" name="loc" value="pt_BR">
		  <input  id="input-rss"  style="width:160px;text-align:center;" placeholder="Digite  seu e-mail" class="form-control input-lg" type="text" name="email">
		  <span class="input-group-btn"><button id="btn-assinar" class="btn btn-lg btn-primary"  type="submit" value=" ASSINAR ">Assinar</button></span>
	      </div>
		</form>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Entendendo Buffer Overflow - 0x02 </h1>
</div>
	
<article>
	<div class="col-sm-10">
	 <span class="post-date">
	   
	   June 
	   11th,
	   
	   2014
	 </span>
	  <div class="article_body">
	  <p>Seguindo com artigos x01, vamos falar sobre buffers, fizemos um breve introdução sobre o assunto Buffer no outro artigos, nesse veremos os tipos de buffers.</p>
<h3>Buffer - o que é?</h3>
<p>(wiki) - Em Segurança computacional e programação um transbordamento de dados ou estouro de buffer (do inglês buffer overflow ou buffer overrun) é uma anomalia onde um programa, ao escrever dados em um buffer, ultrapassa os limites do buffer e sobrescreve a memória adjacente. Esse é um caso especial de violação de segurança de memória. Estouros de buffer podem ser disparados por entradas que são projetadas para executar código, ou alterar o modo como o programa funciona. Isso pode resultar em comportamento errado do programa, incluindo erros de acesso à memória, resultados incorretos, parada total do sistema, ou uma brecha num sistema de segurança. Portanto, eles são a base de muitas vulnerabilidade de software e pode ser explorados maliciosamente.</p>
<h3>Tipos de Buffers</h3>
<p>Os tipos mais comuns de ataques baseados em buffer overflow são:
? Stack-based buffer overflow
? Heap-based buffer overflow
? Return-to-libc attack</p>

<p>Calma, iremos abordar cada um desses detalhadamente, mas para compreender melhor como funciona o ataque em si, já sabemos que buffer é um espaço revesado, e overflow transbordo desses dados, mas como funciona a memoria sabemos disso ? é uma das partes fundamentais entender como funciona, let's go. </p>
<h3>Sequência de instruções</h3>
<p>Qualquer programa compilado (e isto inclui interpretadores de linguagens) possui uma 
forma estruturada em código de máquina denotando uma seqüência de instruções que serão 
executadas pelo processador. Tal seqüência é carregada na memória quando um programa é 
chamado à execução.<br />
A estrutura de um programa na memória se divide em 
quatro partes: texto, dados, stack (pilha) e heap.
<pre>
                  +-------------------+
                   |                   |   &lt;----+
                   |       texto       )|       |
                   |                   |        |
                   +       dados       +        |
                   |         |         |        |
                   |       heap        |        |
                   |                   |        |
                  &lt;                     &gt;       | 
                   |                   |        |
                   |         ^         |        |
                   |         |         |        |
                   +         |         +        |
                   |                   |        |
                   |       pilhas      |        |
                   |                   |        |      +-------------------------+
                   +-------------------+        +-----&lt;  Classical Memory Layout | 
</pre>
</p>
<p><br /></p>
<p>
<a>texto</a>&gt;&gt; contém as instruções do programa 
propriamente ditas e dados somente-leitura. Essa região é 
geralmente somente-leitura, para evitar códigos mutáveis. Uma 
tentativa de escrita nessa área resulta em uma falha de 
segmentação.<br />
<a>dados</a>&gt;&gt; contém todas as variáveis globais e 
estáticas do programa.<br />
<a>heap</a>&gt;&gt; serve para a alocação dinâmica de 
variáveis, através de instruções do tipo malloc();.<br />
<a>pilha</a>&gt;&gt; é a região  Trata-se de um bloco de 
memória onde são armazenadas informações vitais para subrotinas: variáveis locais, parâmetros e 
os valores de retorno.
<p>Algumas definições básicas antes de começar: Um buffer é simplesmente uma contígua
bloco de memória de computador que contém várias instâncias dos mesmos dados
digita. Programadores C associa normalmente com as matrizes de buffer de texto. A maioria
comumente, arrays de caracteres. Arrays, como todas as variáveis &#8203;&#8203;em C, pode ser
declarou estático ou dinâmico. Variáveis &#8203;&#8203;estáticas são alocados em carga
tempo para o segmento de dados. As variáveis &#8203;&#8203;dinâmicas são alocados em tempo de execução em
a pilha. Para transbordar é a fluir, ou preencher por cima, transborda, ou limites.</p><br />
<p>No linux a coisa já começa a ficar diferente vou focar em linux até porque linux é meu postor,tenho que seguir os mandamentos software livre, em breve vamos falar um pouco sobre assembly nada dimais apenas uma leve introdução aos registradores que varia de arquitetura, vamos entender também as proteções tanto do  linux tanto o windows, mas para o windows estou fazendo um paper falando sobre DEP , que é um controlador de violação de memória,em fim, entederá melhor como fazer um bypass(passar), pelos AV usando essa função.No linux a coisa muda meu amigo, quer dizer a estrutura do linux fica assim:  </p><br />
<h3>Divisão de Memória no linux</h3>
<p>O modelo usual de memoria depende muito  do sistema, me utilizarei como base inicial o 
modelo no "Linux/i186" apenas para  demonstracao, apesar dos modelos usuais de memoria 
serem diferentes para cada sistema, o ponto chave e' o mesmo, Heap  é um local, stack  
é outro.</p>
<pre class="code">

     +-----------+
     |  .DATA    |  &lt;-- Regiao onde ocorre o Stack overflow 
     +-----------+
     |  .BSS     |  &lt;-- Regiao onde ocorre o Heap Overflow
     +-----------+
     |  .TEXT    |  &lt;-- Instrucoes em Assembly (Written in Assembly)
     +-----------+

</pre>

<p> A região de dados contém dados inicializados e não inicializadas. Estático
variáveis &#8203;&#8203;são armazenados nesta região. A região de dados corresponde à
seções-BSS dados do arquivo executável. O seu tamanho pode ser alterado com o
brk (2) chamada de sistema. Se a expansão dos dados de BSS ou a pilha de utilizador
esgotar a memória disponível, o processo é bloqueado e é remarcado para
correr novamente com um espaço de memória maior. Nova memória é adicionado entre os dados
e empilhar segmentos.</p><br />
<p>Alguns de nós podem pensar que, apesar de um buffer overflow é uma má prática de programação, mas isso é uma variável não utilizada na pilha, então por que há tanto barulho em torno dele? O que é o buffer de dano invadida pode causar para a aplicação?

Bem, se em uma linha temos que resumir a resposta a estas perguntas, então seria:

Estouros de buffer, se não detectada, pode fazer com que seu programa para falhar ou produzir resultados inesperados. :D até a próximo. </p>
</p>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#exploit developer-ref">
					exploit developer <span>(5)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#Buffer overflow-ref">
					Buffer overflow <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Entendendo Buffer Overflow - 0x02&via=mh4x0f"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
        <img src="http://avatars.githubusercontent.com/u/6795613" style="width:80px;height:80px;" class="img-rounded author-image" />
        <h4 class="section-title author-name">mh4x0f</h4>
        <p class="author-bio">One 0x41414141 worth a thousand words</p>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous"><a href="/c%20programming/2014/06/04/Programando%20Socket%20em%20C%200xC2.html" title="Programando Socket em C 0xC2">&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/exploit%20developer/2014/06/12/Buffer%20Overflow%20na%20Pratica%20-%200x03.html" title="Buffer Overflow na Pratica - 0x03">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>



    
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'mh4x0fblog';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>





		<footer>
			<hr/>
			<p>
				&copy; 2015 mh4x0f with Jekyll. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'mh4x0f']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

